<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Referral Game Frontend</title>
    <style>
        body {
            background-image: url(logo.jpg_large); 
            background-size: cover;
            background-repeat: no-repeat;
            background-position: center;
        }
    </style>
</head>
<body>
    <h1>The Referral Game</h1>
    
    <h2>Join the Game</h2>
    <label for="referrerAddress">Referrer Address:</label>
    <input type="text" id="referrerAddress" placeholder="Enter referrer address"><br><br>
    <button onclick="joinGame()">Join Game</button>

    <h2>Withdraw Points</h2>
    <button onclick="withdrawPoints()">Withdraw Points</button><br><br>

    <h2>Check Balance</h2>
    <button onclick="checkBalance()">Check Balance</button><br><br>
    <div id="balance"></div>

    <script src="https://cdn.jsdelivr.net/npm/web3@1.3.6/dist/web3.min.js"></script>
    <script>
        // Replace contractAddress with your deployed contract address
        const contractAddress = 'YOUR_CONTRACT_ADDRESS';

        const contractABI = [
            // Include your contract ABI here
            // Example:
            // {
            //     "constant": false,
            //     "inputs": [
            //         {"name": "referrerAddress", "type": "address"}
            //     ],
            //     "name": "join",
            //     "outputs": [],
            //     "payable": false,
            //     "stateMutability": "nonpayable",
            //     "type": "function"
            // },
            // {
            //     "constant": false,
            //     "inputs": [],
            //     "name": "withdrawPoints",
            //     "outputs": [],
            //     "payable": false,
            //     "stateMutability": "nonpayable",
            //     "type": "function"
            // },
            // Add more functions as per your contract
        ];

        let web3 = new Web3(Web3.givenProvider);
        let contract = new web3.eth.Contract(contractABI, contractAddress);

        async function joinGame() {
            const referrerAddress = document.getElementById("referrerAddress").value;
            try {
                await contract.methods.join(referrerAddress).send({ from: ethereum.selectedAddress });
                alert("Joined the game successfully!");
            } catch (error) {
                alert("Error: " + error.message);
            }
        }

        async function withdrawPoints() {
            try {
                await contract.methods.withdrawPoints().send({ from: ethereum.selectedAddress });
                alert("Points withdrawn successfully!");
            } catch (error) {
                alert("Error: " + error.message);
            }
        }

        async function checkBalance() {
            const balance = await contract.methods.balanceOf(ethereum.selectedAddress).call();
            document.getElementById("balance").innerText = "Balance: " + balance;
        }
    </script>
</body>
</html>
